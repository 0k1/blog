<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Blog by Arun Raj - Blogging about stuffs</title>
    <meta name="description" content="theblueasterisk" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

</head>
<body class="post-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
        <a class="subscribe-button icon-feed" href="/rss.xml">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">DataBinding In WPF </h1>
            <section class="post-meta">                
                <time class="post-date" datetime="2014-08-27">27 Aug 2014</time>
                
            </section>
        </header>

<!--         <header class="post-header">
            <a id="blog-logo" href="blueasterisk.github.io">
                
                    <span class="blog-title">Blog by Arun Raj</span>
                 
            </a>
        </header> -->
        
        <!-- <span class="post-meta">
            <time datetime="2014-08-27">27 Aug 2014</time>
            
        </span> -->

        <!-- <h1 class="post-title">DataBinding In WPF </h1> -->

        <section class="post-content">
            <p>While the MSDN has provided an elaborate article on data binding in WPF (you can find that <a href="http://msdn.microsoft.com/en-us/library/ms752347.aspx">here</a>), this is my attempt to understand what data binding is and how it is done in WPF. Since this is a vast topic let me just break it down to the main topics in data binding.</p>

<ol>
<li>Introduction to Data Binding<br></li>
<li>Binding Modes<br></li>
<li>Binding to Source<br></li>
<li>The UpdateSourceTrigger Property<br></li>
<li>Converters in Data Binding<br></li>
<li>Multi Binding<br></li>
<li>Validation<br></li>
<li>Binding to Non-DP<br>
9. Binding to Collections<br></li>
<li>Datatemplates and Data triggers<br></li>
<li>DataTemplate Selectors</li>
</ol>

<p>Since this is quite a large. Topics after UpdateSourceTrigger will be explained in another post.</p>

<p><strong>1. Introduction to Data Binding.</strong></p>

<p>The Main aspect of Data Binding is to interact with data elements and establish a connection between the different properties in WPF. Properties in .NET environment are called CLR properties. Also the UI element to which a CLR property is bound to is called a dependency property. Dependency properties are one of the major aspects of WPF. These are the properties that are registered with the dependency property register. They contain the basic Measure and Arrange overrides that a UI element must do while its value changes in order to reflect on its measurement and arrangement in the UI. So dependency properties can be bound to one another or to a CLR property. The restriction being that the target property in data binding should always be a dependency property. If you think about it, that makes sense right? The target should always be able to handle its changes on its own so as to reflect itself in the UI. Hence all data binding targets should be dependency properties. There are more important stuff about data binding that needs to be addressed. We&#39;ll get to them as we go forward with each topic.</p>

<p>*<em>Simple Data Binding *</em></p>

<p>Data Binding between UI elements</p>

<p>For this part I&#39;m going to use XAML which is a simple markup language that&#39;s used to write the UI part of most windows applications. You can try these in Microsoft Visual Studio or any XAML editors like XAMLPAD.</p>

<p><code>
&lt;Slider Name=&quot;mySlider&quot; Value=&quot;20&quot; Minimum=&quot;0&quot; Maximum=&quot;100&quot; Height=&quot; 50&quot; /&gt;  
&lt;TextBlock Name=&quot;tb&quot; Text=&quot;{Binding ElementName=mySlider, Path=Value, Mode=OneWay}&quot;/&gt;  
</code></p>

<p>Here we have two elements, a slider named mySlider and a textblock called tb. The Textproperty of the textbox is bound to the Valueproperty of the slider. As you can see the binding is always set at the target of data binding. Since here we are binding between two UI elements, in the binding statement ElementName and Path are mentioned. Path need not be explicitly mentioned. Ie, we can write the above statement as</p>

<p><code>
&lt;TextBlock Name=&quot;tb&quot; Text=&quot;{Binding Value, ElementName=mySlider, Mode=OneWay}&quot;/&gt;  
</code></p>

<p>You can always do this binding in the code. One method using Binding class is as follows</p>

<p><code>
Binding binding = new Binding(&quot;Value&quot;);  
binding.ElementName = &quot;mySlider&quot;;  
tb.SetBinding(TextBox.TextProperty, binding);  
</code></p>

<p><strong>Binding Modes</strong></p>

<p>If you look at the XAML code above you can see a property named Mode being set during binding. Mode defines the nature of the data binding scenario. Mode can take the following values</p>

<p>1.Default<br>
2.OneTime<br>
3.OneWay<br>
4.OneWayToSource<br>
5.TwoWay</p>

<p>The operation of default is obvious. There are default binding modes defined for most of the dependency properties in WPF. OneTime binding works only once. Binding clears after onetime execution. OneWay declares that the binding is one way. I.e. it causes changes to the source property to automatically update the target property but the source does not get changed. OneWayToSource does the opposite of OneWay. i.e. causes changes to the target property to automatically update the source property but the target does not get changed. Operation of TwoWay can be understood from the name itself. Source or target get updated while the other one changes.</p>

<p>** Binding To Source**</p>

<p>In most scenarios we&#39;ll be using data binding to handle the changes on one element due to another element. But at times we&#39;ll need to bind a property to another one on the same element or to its parent element. At such requirements binding to source is useful.</p>

<p>Consider a case where you&#39;d want create a textbox whose width changes as the value inside it changes. We can do that either in code as</p>

<p><code>
Binding binding = new Binding(&quot;Text&quot;);  
binding.ElementName = &quot;tb&quot;;  
tb.SetBinding(TextBox.WidthProperty, binding);  
</code></p>

<p>or in XAML as</p>

<p><code>
&lt;TextBox Text=&quot;{Binding RelativeSource={RelativeSource Self}, Path=Width}&quot; Width=&quot;100&quot;/&gt;  
</code></p>

<p>RelativeSource values can be modified to access the values of its ancestor or a templatedparent.</p>

<p>I&#39;d like to add an extra point about template binding here. TemplateBinding is one of the methods used in WPF template definition to gain controls to access the values of its parent. When writing different control templates for different controls, sometimes we&#39;d want the value of a template element to vary as the templated element varies.</p>

<p><code>
&lt;Button Height=&quot; 50&quot; Width=&quot; 100&quot;&gt;  
&lt;Button.Template&gt;  
&lt;ControlTemplate&gt;  
&lt;Ellipse Fill=&quot;Red&quot; Height=&quot;{TemplateBinding Height}&quot; Width=&quot;{TemplateBinding Width}&quot; /&gt;  
&lt;/ControlTemplate&gt;  
&lt;/Button.Template&gt;  
&lt;/Button&gt;  
</code></p>

<p>Here the values of the parent are being accessed by the rectangle using templatebinding. It is to be noted that this is a binding done from parent to child element. The value is being accessed by the child element. If we wanted binding in both ways we&#39;d use sourcebinding in which we&#39;ll give RelativeSource={RelativeSource TemplatedParent}. Binding mode can also be specified here to control the flow.<br>
If you try the first two codes in Binding To Source, you&#39;ll see that the XAML version requires you to change the focus in order to reflect the change in the UI. This is because by default the binding UpdateSourceTrigger for a textbox is set to &quot;LostFocus&quot;. Lets look at what UpdateSourceTrigger does in the next topic.</p>

<p><strong>UpdateSourceTrigger Property</strong></p>

<p>Consider a situation where we have two text boxes and we are creating one mimicking the other. This can be written in XAML as</p>

<p><code>
&lt;TextBox x:Name=&quot;txtbox&quot;/&gt;  
&lt;TextBox Text=&quot;{Binding ElementName=txtbox, Path=Text, Mode=TwoWay}&quot;/&gt;  
</code></p>

<p>Again we encounter the need to change the focus at target for the binding to take place between target and source. To make this work, lets set the UpdateSourceTrigger</p>

<p><code>
&lt;TextBox x:Name=&quot;txtbox&quot;/&gt;  
&lt;TextBox Text=&quot;{Binding ElementName=txtbox, Path=Text, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}&quot;/&gt;  
</code> </p>

<p>This would give us two text boxes one reflecting the other.</p>

<p>In the case of two way binding sometimes we need to specify the conditions when the source data is to be updated. For such requirements UpdateSourceTrigger values are set. UpdateSourceTrigger is used in data binding scenarios to specify when the changes in the target property should reflect in the source. It can have the following values</p>

<ul>
<li>Default</li>
<li>Explicit</li>
<li>LostFocus</li>
<li>PropertyChanged</li>
</ul>

<p>PropertyChanged binds the data as soon as there is any change in the target. LostFocus binds the data from target to source when the target goes out of focus. This will be useful when we wish to grab data from a field when user enters another field. Explicit method tells the CLR that the binding will take place explicitly. Suppose we want to bind a textbox TextProperty to a TextBlock TextProperty on a button click. In such situations UpdateSourceTrigger=Explicit is used. We&#39;ll see how explicit calls are made to bind data.</p>

<p>XAML</p>

<p><code>
&lt;TextBox x:Name=&quot;txtbox&quot;/&gt;  
&lt;TextBox x:Name=&quot;txtbox2&quot; Text=&quot;{Binding ElementName=txtbox, Path=Text, UpdateSourceTrigger=Explicit, Mode=TwoWay}&quot;/&gt;  
&lt;Button Click=&quot;Button_Click&quot;&gt;Update&lt;/Button&gt;</code></p>

<blockquote>
</blockquote>

<p>C#</p>

<p><code>
private void Button_Click(object sender, RoutedEventArgs e)  
{  
BindingExpression be = txtbox2.GetBindingExpression(TextBox.TextProperty);  
be.UpdateSource();  
}</code></p>

<p>In the above example the button click updates the source.</p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            
                <figure class="author-image">
                    <a class="img" href="/" style="background-image: url(/assets/images/profile.png)">
                    <span class="hidden">Arun Raj's Picture</span></a>
                </figure>
                <section class="author">
                    <!-- Author Name -->
                    <h4> Arun Raj </h4>
                    <!-- Author Bio -->
                    <p> 
                        Here goes the author description. You might want to place some links too in here
                    </p>
                </section>                
            

            <!-- Share links section -->
            <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=DataBinding In WPF &amp;url=s/2014/08/27/databinding-in-wpf.html"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=s/2014/08/27/databinding-in-wpf.html"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=s/2014/08/27/databinding-in-wpf.html"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
            
            <!-- Disqus comments -->
            
            
        </footer>

    </article>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="/">Blog by Arun Raj</a> &copy; 
               &bull; All rights reserved.
      </section>
      <section class="poweredby">Made with Jekyll using 
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>
    
    <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>   
</body>
</html>
