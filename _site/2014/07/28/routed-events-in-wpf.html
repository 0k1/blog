<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Blog by Arun Raj - Blogging about stuffs</title>
    <meta name="description" content="theblueasterisk" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

</head>
<body class="post-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
        <a class="subscribe-button icon-feed" href="/rss.xml">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Routed Events in WPF</h1>
            <section class="post-meta">                
                <time class="post-date" datetime="2014-07-28">28 Jul 2014</time>
                
            </section>
        </header>

<!--         <header class="post-header">
            <a id="blog-logo" href="blueasterisk.github.io">
                
                    <span class="blog-title">Blog by Arun Raj</span>
                 
            </a>
        </header> -->
        
        <!-- <span class="post-meta">
            <time datetime="2014-07-28">28 Jul 2014</time>
            
        </span> -->

        <!-- <h1 class="post-title">Routed Events in WPF</h1> -->

        <section class="post-content">
            <p>Routed Events are one of the key concepts of WPF. It enables events to be handled at parent levels. Routed events can be handled at Parent levels of its Visual Tree. Consider a case when you have a custom grid filled with two rectangles and you&#39;d want to initiate a handler when  you press the on any element of the grid. If routing wasn&#39;t there you&#39;d have to write click event handles to both the rectangles and direct them to a single handler. If the grid consisted of complex graphic elements the task would be tedious. But since WPF supports Routed Events we can write handlers on the grid control itself and it&#39;d be able to catch any events happening inside. That is the event can be handled at parent level of the element raising the event. This is the key concept of routed events</p>

<p>Let&#39;s see the different Events in WPF in detail. There are 3 types of events in WPF.</p>

<p>1.Direct Events</p>

<p>2.Tunneled Events</p>

<ol>
<li>Bubbled Events</li>
</ol>

<p><strong>Direct Events</strong></p>

<p>Direct Events are similar to the normal CLR events in C#. They are defined for an object and it is capable of raising the event by itself. Event handlers are written on the element raising the event itself.</p>

<p><strong>Tunneled Events.</strong></p>

<p>Tunneled events are one of the routed events present in WPF. Consider a case when a grid containing a button has a button click event at the button level. The first event handler that is being fired is not the event handler at the button level, but the PreviewMouseLeftKeyDown event at the grid level. Ie, The event can be handled even before reaching the event triggering element. This concept can be used in many ways. Consider a situation where you want only some of the characters entered from the keyboard to be reflected in your textbox. You can set event handled parameter to true in a  PreviewKeyDown Event and thereby cancelling the event from taking place at all. Now Lets see how a Preview event is written in XAML and C#</p>

<p>`</p>

<p><Grid Name="grid" UIElement.PreviewMouseLeftButtonDown="grid_TunnelHandler">
<Rectangle PreviewMouseLeftButtonDown="Rect_TunnelHandler" Height="100" Width="100"/></Grid></p>

<p>`</p>

<p>Here first the grid<em>TunnelHandler is fired first and  then Rect</em>TunnelHandler. The C# Code for the event handlers will be as</p>

<p>`</p>

<p>private void Rect_TunnelHandler(object sender, MouseButtonEventArgs e)
{
}</p>

<p><code>
At any level we can set
</code></p>

<blockquote>
<p>e.handled=true;</p>

<p>`</p>
</blockquote>

<p>to handle the event from taking place.</p>

<p>Now consider a situation where we&#39;d want to make the routing to continue even if it has a e.handled value set to true. For this we have to go back to C# and write the handler ourselves.</p>

<p>The method to add a handler is as
`
grid.AddHandler(UIElement.PreviewMouseLeftButtonDown, new RoutedEventHandler(grid_TunnelHandler), (bool) ContinueIfHandled);
If the final parameter is set to true then the event will continue routing even if e.Handled is set  to true.</p>

<p><strong>Registering A Routed Event</strong>`<code>
</code>
public static readonly RoutedEvent MyRoutedEvent=EventManager.RegisterRoutedEvent(&quot;AnyNameToReferInXaml&quot;, RoutingStrategy.Bubble/Tunneled, typeof(EventHandlerFunction),typeof(ParentClass));`
A custom routed event can be registered in the WPF Routed events list as above.</p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            
                <figure class="author-image">
                    <a class="img" href="/" style="background-image: url(/assets/images/profile.png)">
                    <span class="hidden">Arun Raj's Picture</span></a>
                </figure>
                <section class="author">
                    <!-- Author Name -->
                    <h4> Arun Raj </h4>
                    <!-- Author Bio -->
                    <p> 
                        Here goes the author description. You might want to place some links too in here
                    </p>
                </section>                
            

            <!-- Share links section -->
            <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Routed Events in WPF&amp;url=s/2014/07/28/routed-events-in-wpf.html"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=s/2014/07/28/routed-events-in-wpf.html"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=s/2014/07/28/routed-events-in-wpf.html"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
            
            <!-- Disqus comments -->
            
            
        </footer>

    </article>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="/">Blog by Arun Raj</a> &copy; 
               &bull; All rights reserved.
      </section>
      <section class="poweredby">Made with Jekyll using 
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>
    
    <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>   
</body>
</html>
